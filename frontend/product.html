<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Product Details</title>
<style>
  /* [Your Original 200+ lines of CSS preserved] */
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
  body { background: linear-gradient(135deg, #1a0a2e 0%, #2d1b4e 50%, #1a0a2e 100%); color: white; min-height: 100vh; }
  .navbar { display: flex; justify-content: space-between; align-items: center; padding: 1.2rem 3rem; background: rgba(26, 10, 46, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(138, 43, 226, 0.4); box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5); }
  .navbar h2 { margin: 0; font-size: 2.2rem; background: linear-gradient(135deg, #a855f7, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; cursor: pointer; }
  .nav-links button { background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%); color: white; padding: 0.9rem 2rem; border-radius: 12px; border: none; cursor: pointer; font-size: 1.1rem; }
  .container { max-width: 1200px; margin: 2rem auto; padding: 2rem; }
  .product-container { display: grid; grid-template-columns: 400px 1fr; gap: 3rem; background: rgba(40, 20, 60, 0.8); backdrop-filter: blur(10px); border-radius: 20px; padding: 3rem; border: 1px solid rgba(168, 85, 247, 0.2); box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5); }
  .product-image { width: 100%; height: 500px; object-fit: cover; border-radius: 15px; box-shadow: 0 0 25px rgba(138, 43, 226, 0.4); }
  .product-info h1 { font-size: 2.5rem; margin-bottom: 1rem; background: linear-gradient(135deg, #a855f7, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .product-price { font-size: 2rem; color: #a855f7; margin: 1rem 0; font-weight: 700; }
  .rating-badge { background: linear-gradient(135deg, #f59e0b, #fbbf24); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; }
  .product-meta { display: flex; flex-wrap: wrap; gap: 1.5rem; margin: 1.5rem 0; padding: 1.5rem; background: rgba(75, 40, 110, 0.4); border-radius: 12px; }
  .meta-item { flex: 1; min-width: 150px; }
  .meta-label { color: #c4b5fd; font-size: 0.9rem; margin-bottom: 0.3rem; }
  .description { line-height: 1.6; margin: 2rem 0; color: #e9d5ff; }
  .actions { display: flex; gap: 1rem; margin-top: 2rem; }
  #addToCart { background: linear-gradient(135deg, #a855f7, #ec4899); color: white; flex: 2; padding: 1rem; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: bold; }
  #addToWishlist { background: rgba(168, 85, 247, 0.2); color: #a855f7; border: 1px solid rgba(168, 85, 247, 0.4); flex: 1; padding: 1rem; border-radius: 12px; cursor: pointer; font-weight: bold; }
  .loading { color: #a855f7; text-align: center; font-size: 1.5rem; margin-top: 50px;}
</style>
</head>
<body>

<div class="navbar">
  <h2 onclick="window.location.href='shopping.html'">ShopHub</h2>
  <div class="nav-links">
    <button onclick="window.location.href='shopping.html'">← Back</button>
  </div>
</div>

<div class="container">
  <div class="product-container" id="productContainer">
    <div class="loading">Fetching details from Python...</div>
  </div>
</div>

<script>
const API_URL = 'http://localhost:8080/api';
const urlParams = new URLSearchParams(window.location.search);
const productId = urlParams.get("id");

let currentProduct = null;
let cart = JSON.parse(localStorage.getItem('cart') || '[]');

async function loadProduct() {
  const container = document.getElementById('productContainer');
  try {
      const res = await fetch(`${API_URL}/product/${productId}`);
      if(!res.ok) throw new Error("Not Found");
      currentProduct = await res.json();
      displayProduct(currentProduct);
  } catch(e) {
      container.innerHTML = `<div class="loading">Product not found or backend offline.</div>`;
  }
}

function displayProduct(product) {
  const container = document.getElementById('productContainer');
  container.innerHTML = `
    <img src="${product.thumbnail}" class="product-image">
    <div class="product-info">
      <h1>${product.title}</h1>
      <div style="margin: 10px 0;">
        <span class="rating-badge">⭐ ${product.rating || 4.5}</span>
      </div>
      <div class="product-price">$${product.price}</div>
      
      <div class="product-meta">
        <div class="meta-item"><div class="meta-label">Brand</div><div>${product.brand || 'Generic'}</div></div>
        <div class="meta-item"><div class="meta-label">Category</div><div>${product.category}</div></div>
        <div class="meta-item"><div class="meta-label">Stock</div><div>${product.stock} units</div></div>
      </div>
      
      <div class="description">
        <h3>Description</h3>
        <p>${product.description}</p>
      </div>
      
      <div class="actions">
        <button id="addToCart" onclick="addToCart()">Add to Cart</button>
        <button id="addToWishlist" onclick="alert('Added to wishlist!')">Wishlist</button>
      </div>
    </div>
  `;
}

function addToCart() {
    if(!currentProduct) return;
    const exists = cart.find(p => p.id === currentProduct.id);
    if(exists) {
        exists.quantity++;
    } else {
        cart.push({...currentProduct, quantity: 1});
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    
    const btn = document.getElementById('addToCart');
    btn.textContent = "✓ Added!";
    setTimeout(() => btn.textContent = "Add to Cart", 1500);
}

loadProduct();
</script>
</body>
</html>